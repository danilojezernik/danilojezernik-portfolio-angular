<!-- Sidebar -->
<div id="sidebar"
     class="fixed inset-y-0 z-40 left-0 w-64 bg-background-menu text-white transform -translate-x-full transition-transform border-r border-gray-500 border-opacity-45 duration-300 ease-in-out"
     #sidebar>
  <div class="p-4">
    <h2 class="text-xl font-semibold">Menu</h2>
    <ul class="mt-4">
      <li *ngFor="let menu of MENU_TOP">
        <ng-container
          *ngIf="menu.menu !== 'menu.login' && menu.menu !== 'menu.logout' && menu.menu !== 'menu.dashboard'">
          <a data-cy="open-route" [routerLink]="menu.path"
             class="block py-2 hover:text-header transition-colors duration-500" (click)="toggleSidebar($event)">
            {{ menu.menu | translate }}
          </a>
        </ng-container>
      </li>

    </ul>
  </div>
</div>

<div data-cy="close-menu" class="fixed inset-0 bg-black bg-opacity-50 z-30" *ngIf="sidebarOpened"
     (click)="toggleSidebar($event)"></div>
<!-- Content -->
<div class="flex-1 flex flex-col overflow-hidden" (click)="closeSidebarIfClickedOutside($event)">
  <!-- Navbar -->
  <div class="bg-transparent">
    <div class="container mx-auto">


      <div class="flex justify-between items-center py-4 px-2">
        <div>
          <a routerLink="/">
            <img src="assets/media/logo/logo-dj.png" class="h-12 rotate-in-center" alt="Danilo Jezernik Logo">
          </a>
        </div>

        <div class="flex flex-row">

          <ng-container *ngFor="let menu of LOGIN_LOGOUT">
            <ng-container
              *ngIf="(menu.condition === 'loggedIn' && (isLoggedIn$ | async)) || (menu.condition === 'loggedOut' && !(isLoggedIn$ | async))">

              <ng-container *ngIf="menu.condition === 'loggedIn'">
                <a [routerLink]="menu.path" (click)="menu.path === '/logout' ? logOut() : null"
                   class="flex items-center rounded-lg group">
                  <img class="rotate-in-center" src="https://img.icons8.com/ios-filled/25/ffffff/login-rounded.png"
                       alt="login-rounded"/>
                  <span class="ms-4">
                </span>
                </a>
              </ng-container>

              <ng-container *ngIf="menu.condition === 'loggedOut'">
                <a [routerLink]="menu.path"
                   class="flex items-center rounded-lg group">
                  <img class="rotate-in-center"
                       src="https://img.icons8.com/ios-filled/25/ffffff/login-rounded-right.png"
                       alt="login-rounded-right"/>
                  <span class="ms-4">
                </span>
                </a>
              </ng-container>

            </ng-container>
          </ng-container>

          <ng-container *ngFor="let menu of MENU_TOP">
            <ng-container *ngIf="menu.menu === 'menu.dashboard'">
              <button [routerLink]="menu.path" *ngIf="userRole" type="button"
                      class="flex text-sm rounded-full mr-4 mt-1"
                      aria-expanded="false" data-dropdown-toggle="dropdown">
                <span class="sr-only">Open user menu</span>
                <img class="w-8 h-8 rounded-full" src="https://flowbite.com/docs/images/people/profile-picture-5.jpg"
                     alt="user photo">
              </button>
            </ng-container>
          </ng-container>

          <button data-cy="main-header" class="text-white hover:text-gray-600" (click)="toggleSidebar($event)"
                  #openSidebarButton>
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          <div class="ms-4 mt-2">
            <a class="flex items-center cursor-pointer rounded-lg group"
               *ngIf="translate.currentLang === 'en'" (click)="useLanguage('si')">
              <svg class="rotate-in-center" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25"
                   viewBox="0 0 50 50">
                <path fill="black"
                      d="M 6 3 C 4.300781 3 3 4.300781 3 6 L 3 26 C 3 27.699219 4.300781 29 6 29 L 6.40625 29 L 8 27 L 6 27 C 5.398438 27 5 26.601563 5 26 L 5 6 C 5 5.398438 5.398438 5 6 5 L 26 5 C 26.601563 5 27 5.398438 27 6 L 27 21 L 24 21 C 22.300781 21 21 22.300781 21 24 L 21 27 L 16 27 L 17.59375 29 L 21 29 L 21 32.40625 L 23 34.09375 L 23 24 C 23 23.398438 23.398438 23 24 23 L 44 23 C 44.601563 23 45 23.398438 45 24 L 45 44 C 45 44.601563 44.601563 45 44 45 L 24 45 C 23.398438 45 23 44.601563 23 44 L 23 42 L 21 43.6875 L 21 44 C 21 45.699219 22.300781 47 24 47 L 44 47 C 45.699219 47 47 45.699219 47 44 L 47 24 C 47 22.300781 45.699219 21 44 21 L 29 21 L 29 6 C 29 4.300781 27.699219 3 26 3 Z M 16 8 L 16 10 L 8 10 L 8 12 L 19.90625 12 C 19.597656 14.226563 18.292969 16.054688 16.65625 17.53125 C 14.148438 15.332031 12.875 13.03125 12.875 13.03125 L 11.125 13.96875 C 11.125 13.96875 12.433594 16.378906 15.0625 18.78125 C 14.996094 18.828125 14.941406 18.890625 14.875 18.9375 C 12.234375 20.757813 9.59375 21.65625 9.59375 21.65625 L 10.21875 23.5625 C 10.21875 23.5625 13.125 22.597656 16.03125 20.59375 C 16.238281 20.449219 16.449219 20.28125 16.65625 20.125 C 17.796875 20.96875 19.125 21.742188 20.625 22.34375 L 21.375 20.46875 C 20.226563 20.011719 19.199219 19.417969 18.28125 18.78125 C 20.109375 17.050781 21.636719 14.792969 21.9375 12 L 25 12 L 25 10 L 18 10 L 18 8 Z M 12 25 L 7 31 L 10 31 L 10 35 L 14 35 L 14 31 L 17 31 Z M 33 26.40625 L 27.8125 40.1875 L 30.3125 40.1875 L 31.40625 37 L 36.6875 37 L 37.8125 40.1875 L 40.3125 40.1875 L 35.09375 26.40625 Z M 34 29.40625 L 36 35.09375 L 32 35.09375 Z M 19 33 L 19 36 L 10 36 L 14 40 L 19 40 L 19 43 L 25 38 Z"></path>
              </svg>
            </a>
            <a class="flex items-center cursor-pointer rounded-lg group"
               *ngIf="translate.currentLang === 'si'" (click)="useLanguage('en')">
              <svg class="rotate-in-center" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25"
                   viewBox="0 0 50 50">
                <path fill="black"
                      d="M 6 3 C 4.300781 3 3 4.300781 3 6 L 3 26 C 3 27.699219 4.300781 29 6 29 L 6.40625 29 L 8 27 L 6 27 C 5.398438 27 5 26.601563 5 26 L 5 6 C 5 5.398438 5.398438 5 6 5 L 26 5 C 26.601563 5 27 5.398438 27 6 L 27 21 L 24 21 C 22.300781 21 21 22.300781 21 24 L 21 27 L 16 27 L 17.59375 29 L 21 29 L 21 32.40625 L 23 34.09375 L 23 24 C 23 23.398438 23.398438 23 24 23 L 44 23 C 44.601563 23 45 23.398438 45 24 L 45 44 C 45 44.601563 44.601563 45 44 45 L 24 45 C 23.398438 45 23 44.601563 23 44 L 23 42 L 21 43.6875 L 21 44 C 21 45.699219 22.300781 47 24 47 L 44 47 C 45.699219 47 47 45.699219 47 44 L 47 24 C 47 22.300781 45.699219 21 44 21 L 29 21 L 29 6 C 29 4.300781 27.699219 3 26 3 Z M 16 8 L 16 10 L 8 10 L 8 12 L 19.90625 12 C 19.597656 14.226563 18.292969 16.054688 16.65625 17.53125 C 14.148438 15.332031 12.875 13.03125 12.875 13.03125 L 11.125 13.96875 C 11.125 13.96875 12.433594 16.378906 15.0625 18.78125 C 14.996094 18.828125 14.941406 18.890625 14.875 18.9375 C 12.234375 20.757813 9.59375 21.65625 9.59375 21.65625 L 10.21875 23.5625 C 10.21875 23.5625 13.125 22.597656 16.03125 20.59375 C 16.238281 20.449219 16.449219 20.28125 16.65625 20.125 C 17.796875 20.96875 19.125 21.742188 20.625 22.34375 L 21.375 20.46875 C 20.226563 20.011719 19.199219 19.417969 18.28125 18.78125 C 20.109375 17.050781 21.636719 14.792969 21.9375 12 L 25 12 L 25 10 L 18 10 L 18 8 Z M 12 25 L 7 31 L 10 31 L 10 35 L 14 35 L 14 31 L 17 31 Z M 33 26.40625 L 27.8125 40.1875 L 30.3125 40.1875 L 31.40625 37 L 36.6875 37 L 37.8125 40.1875 L 40.3125 40.1875 L 35.09375 26.40625 Z M 34 29.40625 L 36 35.09375 L 32 35.09375 Z M 19 33 L 19 36 L 10 36 L 14 40 L 19 40 L 19 43 L 25 38 Z"></path>
              </svg>
            </a>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<nav class="container mx-auto">
  <!-- Top Links -->
  <div class="flex justify-end space-x-4 p-2 bg-gray-100 text-sm text-gray-700">
    <a *ngFor="let menu of LOGIN_LOGOUT" href="#" class="hover:underline">

      <ng-container
        *ngIf="(menu.condition === 'loggedIn' && (isLoggedIn$ | async)) || (menu.condition === 'loggedOut' && !(isLoggedIn$ | async))">
        <ng-container *ngIf="menu.condition === 'loggedIn'">
          <a [routerLink]="menu.path" (click)="menu.path === '/logout' ? logOut() : null"
             class="flex items-center rounded-lg group">
            <img class="rotate-in-center" src="https://img.icons8.com/ios-filled/25/000000/login-rounded.png"
                 alt="login-rounded"/>
            <span class="ms-4">
                </span>
          </a>
        </ng-container>

        <ng-container *ngIf="menu.condition === 'loggedOut'">
          <a [routerLink]="menu.path"
             class="flex items-center rounded-lg group">
            <img class="rotate-in-center"
                 src="https://img.icons8.com/ios-filled/25/000000/login-rounded-right.png"
                 alt="login-rounded-right"/>
            <span class="ms-4">
                </span>
          </a>
        </ng-container>

      </ng-container>
    </a>
  </div>

  <!-- Main Navigation -->
  <div class="flex justify-between items-center p-4">
    <!-- Logo -->
    <div class="flex-shrink-0">
      <a href="#" class="text-xl font-bold text-gray-800">Logo</a>
    </div>

    <!-- Desktop Navigation Links -->
    <div class="hidden md:flex space-x-8">
      <a *ngFor="let data of MENU_TOP" [href]="data.path" class="hover:text-gray-600">
        {{ data.menu | translate }}
      </a>
    </div>

    <!-- Mobile Hamburger Icon -->
    <button
      class="md:hidden flex items-center text-gray-800"
      (click)="toggleMenu()"
      aria-label="Toggle menu"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div
    *ngIf="isMenuOpen"
    class="fixed inset-y-0 left-0 w-64 bg-white shadow-lg z-10 transform transition-transform duration-300"
    [ngClass]="{ 'translate-x-0': isMenuOpen, '-translate-x-full': !isMenuOpen }"
  >
    <button (click)="toggleMenu()" class="p-4 text-gray-800">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
    <div class="flex flex-col p-4 space-y-4">
      <a *ngFor="let data of MENU_TOP" href="#" class="hover:text-gray-600">
          {{ data.menu | translate }}
      </a>
    </div>
  </div>
</nav>
